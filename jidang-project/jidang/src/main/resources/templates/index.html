<!doctype html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:fragment="layout(content, scripts, css)">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle} ?: 'Jidang'">Jidang</title>

    <!-- 기본 CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}">

    <!-- 페이지별 추가 CSS -->
    <th:block th:replace="${css}"></th:block>
</head>
<body>

<header class="site-header">
    <div class="nav-container">
        <!-- 로고 -->
        <div class="logo">
            <a href="/">Jidang</a>
        </div>

        <!-- PC 메뉴 -->
        <nav class="nav-links">
            <a th:href="@{/post/community}"
               th:classappend="${activePage == 'community'} ? 'active'">
                커뮤니티
            </a>
            <a th:href="@{/#game-section}"
               th:classappend="${activePage == 'games'} ? 'active'">
                게임
            </a>
            <!-- 페이지 정리 후 경로 수정 필요, 모바일 버전 포함;; -->
            <a th:href="@{/guides}"
               th:classappend="${activePage == 'guides'} ? 'active'">
                공략
            </a>
            <a th:href="@{/official}"
               th:classappend="${activePage == 'official'} ? 'active'">
                공식
            </a>
            <a th:href="@{/title}"
               th:classappend="${activePage == 'achievements'} ? 'active'">
                업적
            </a>
        </nav>

        <!-- 오른쪽 액션들 -->
        <div class="nav-actions">

            <!-- 검색 버튼 -->
            <button class="icon-btn pc-only"
                    type="button"
                    onclick="toggleSearch()">
                🔍
            </button>

            <!-- 🔍 검색 인풋: /post/search + keyword -->
            <form id="searchForm"
                  th:action="@{/post/search}"
                  method="get"
                  class="search-form hidden pc-only">
                <input type="text"
                       name="keyword"
                       placeholder="게시글 검색..."
                       th:value="${param.keyword}" />
            </form>

            <!-- 알림 (임시) -->
            <button class="icon-btn" type="button">
                🔔
            </button>

            <!-- 로그인/프로필 -->
            <a class="nav-link"
               sec:authorize="isAnonymous()"
               th:href="@{/user/login}">
                👤로그인
            </a>

            <a class="nav-link"
               sec:authorize="isAuthenticated()"
               th:href="@{/user/mypage}">
                ⚙️ 마이페이지
            </a>

            <!-- 모바일 메뉴 버튼 -->
            <button class="icon-btn mobile-only"
                    type="button"
                    onclick="toggleMobileMenu()">
                ☰
            </button>
        </div>
    </div>

    <!-- 모바일 메뉴 -->
    <div id="mobileMenu" class="mobile-menu hidden">
        <a th:href="@{/}">홈</a>
        <a th:href="@{/post/community}">커뮤니티</a>
        <a th:href="@{/#game-section}">게임</a>
        <a th:href="@{/guides}">공략</a>
        <a th:href="@{/official}">공식</a>
        <a th:href="@{/title}">업적</a>
    </div>
</header>

<!-- 각 페이지 본문이 들어올 영역 -->
<main>
    <div th:replace="${content}"></div>
    <th:block th:replace="${scripts}"></th:block>
</main>

<footer class="footer-section">
    <div class="footer-container">
        <div class="footer-grid">

            <!-- Brand -->
            <div class="footer-brand">
                <div class="footer-logo">
                    <div class="logo-icon">G</div>
                    <span class="logo-text">GameHub</span>
                </div>
                <p class="footer-desc">모든 게이머를 위한 최고의 커뮤니티 플랫폼</p>
            </div>

            <!-- Links 1 -->
            <div>
                <h4 class="footer-title">커뮤니티</h4>
                <ul class="footer-list">
                    <li><a href="#">포럼</a></li>
                    <li><a href="#">이벤트</a></li>
                    <li><a href="#">토너먼트</a></li>
                    <li><a href="#">길드</a></li>
                </ul>
            </div>

            <!-- Links 2 -->
            <div>
                <h4 class="footer-title">지원</h4>
                <ul class="footer-list">
                    <li><a href="#">고객지원</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">버그 신고</a></li>
                    <li><a href="#">제안</a></li>
                </ul>
            </div>

            <!-- Social -->
            <div>
                <h4 class="footer-title">팔로우하기</h4>
                <div class="footer-social">
                    <a href="#" class="social-btn">F</a>
                    <a href="#" class="social-btn">T</a>
                    <a href="#" class="social-btn">I</a>
                    <a href="#" class="social-btn">Y</a>
                </div>
            </div>

        </div>

        <!-- Bottom -->
        <div class="footer-bottom">
            <p class="footer-copy">© 2025 GameHub. 모든 권리 보유.</p>

            <div class="footer-links">
                <a href="#">개인정보 보호정책</a>
                <a href="#">이용약관</a>
                <a href="#">쿠키 설정</a>
            </div>
        </div>
    </div>
</footer>

<!-- 공통 JS 파일 -->
<script defer th:src="@{/js/index.js}"></script>

</body>
</html>
